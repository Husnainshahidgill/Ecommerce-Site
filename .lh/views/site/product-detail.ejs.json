{
    "sourceFile": "views/site/product-detail.ejs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1766080019475,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766080026132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,44 @@\n+<!doctype html>\r\n+<html lang=\"en\">\r\n+  <head>\r\n+    <meta charset=\"UTF-8\" />\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n+    <title><%= pagetitle %></title>\r\n+\r\n+    <link\r\n+      href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\r\n+      rel=\"stylesheet\"\r\n+    />\r\n+  </head>\r\n+  <body>\r\n+    <div class=\"container py-4\">\r\n+      <a href=\"/\" class=\"btn btn-link px-0\">&larr; Back</a>\r\n+\r\n+      <div class=\"row g-4 align-items-start\">\r\n+        <div class=\"col-12 col-md-6\">\r\n+          <img\r\n+            src=\"/images/uploaded/<%= product.image %>\"\r\n+            alt=\"<%= product.name %>\"\r\n+            class=\"w-100 rounded border\"\r\n+            style=\"aspect-ratio: 1/1; object-fit: cover\"\r\n+          />\r\n+        </div>\r\n+\r\n+        <div class=\"col-12 col-md-6\">\r\n+          <h1 class=\"h3 fw-semibold\"><%= product.name %></h1>\r\n+          <p class=\"text-muted\"><%= product.description %></p>\r\n+\r\n+          <div class=\"mb-3\">\r\n+            <div><strong>Price:</strong> <%= product.price %></div>\r\n+            <div><strong>Color:</strong> <%= product.color %></div>\r\n+            <div><strong>Department:</strong> <%= product.department %></div>\r\n+          </div>\r\n+\r\n+          <a href=\"/add-cart/<%= product._id %>\" class=\"btn btn-info\">\r\n+            Add To Cart\r\n+          </a>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </body>\r\n+</html>\r\n"
                },
                {
                    "date": 1766085803222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,13 +31,38 @@\n           <div class=\"mb-3\">\r\n             <div><strong>Price:</strong> <%= product.price %></div>\r\n             <div><strong>Color:</strong> <%= product.color %></div>\r\n             <div><strong>Department:</strong> <%= product.department %></div>\r\n+            <div><strong>Available:</strong> <%= (product.quantity ?? 0) %></div>\r\n           </div>\r\n \r\n-          <a href=\"/add-cart/<%= product._id %>\" class=\"btn btn-info\">\r\n-            Add To Cart\r\n-          </a>\r\n+          <% const available = (typeof product.quantity !== 'undefined' && product.quantity !== null) ? Number(product.quantity) : 0; %>\r\n+\r\n+          <% if (available <= 0) { %>\r\n+            <button class=\"btn btn-secondary\" disabled>Out of Stock</button>\r\n+          <% } else { %>\r\n+            <form class=\"d-flex gap-2 align-items-center\" method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n+              <div style=\"max-width: 140px;\">\r\n+                <label class=\"form-label mb-1\">Qty</label>\r\n+                <input\r\n+                  type=\"number\"\r\n+                  name=\"qty\"\r\n+                  class=\"form-control\"\r\n+                  min=\"1\"\r\n+                  max=\"<%= available %>\"\r\n+                  value=\"1\"\r\n+                  required\r\n+                />\r\n+              </div>\r\n+\r\n+              <div class=\"pt-4\">\r\n+                <button type=\"submit\" class=\"btn btn-info\">\r\n+                  Add To Cart\r\n+                </button>\r\n+              </div>\r\n+            </form>\r\n+            <small class=\"text-muted d-block mt-2\">Max: <%= available %></small>\r\n+          <% } %>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </body>\r\n"
                },
                {
                    "date": 1766089198107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,69 +1,134 @@\n <!doctype html>\r\n <html lang=\"en\">\r\n-  <head>\r\n-    <meta charset=\"UTF-8\" />\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n-    <title><%= pagetitle %></title>\r\n+<head>\r\n+  <meta charset=\"UTF-8\" />\r\n+  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n+  <title><%= pagetitle %></title>\r\n \r\n-    <link\r\n-      href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\r\n-      rel=\"stylesheet\"\r\n-    />\r\n-  </head>\r\n-  <body>\r\n-    <div class=\"container py-4\">\r\n-      <a href=\"/\" class=\"btn btn-link px-0\">&larr; Back</a>\r\n+  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n+  \r\n+  <style>\r\n+    body { background-color: #fff; color: #1a1a1a; font-family: system-ui, -apple-system, sans-serif; }\r\n+    .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n+    .back-link:hover { color: #000; }\r\n+    \r\n+    /* Image Gallery Styling */\r\n+    .product-img-container {\r\n+      background-color: #f8f9fa;\r\n+      border-radius: 12px;\r\n+      overflow: hidden;\r\n+    }\r\n+    .main-img {\r\n+      width: 100%;\r\n+      aspect-ratio: 1/1;\r\n+      object-fit: cover;\r\n+      mix-blend-mode: multiply; /* Works well if images have white backgrounds */\r\n+    }\r\n \r\n-      <div class=\"row g-4 align-items-start\">\r\n-        <div class=\"col-12 col-md-6\">\r\n+    /* Typography & Details */\r\n+    .product-dept { text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; color: #6c757d; margin-bottom: 0.5rem; }\r\n+    .product-price { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0; }\r\n+    .detail-label { font-weight: 600; width: 100px; display: inline-block; font-size: 0.9rem; }\r\n+    .detail-value { color: #495057; font-size: 0.9rem; }\r\n+\r\n+    /* Form Styling */\r\n+    .qty-input {\r\n+      border: 1px solid #dee2e6;\r\n+      border-radius: 4px;\r\n+      text-align: center;\r\n+      font-weight: 600;\r\n+    }\r\n+    .btn-add-to-cart {\r\n+      background-color: #1a1a1a;\r\n+      color: #fff;\r\n+      border: none;\r\n+      padding: 0.8rem 2rem;\r\n+      font-weight: 600;\r\n+      border-radius: 4px;\r\n+      transition: background-color 0.2s;\r\n+    }\r\n+    .btn-add-to-cart:hover { background-color: #333; color: #fff; }\r\n+    .btn-out-of-stock { padding: 0.8rem 2rem; border-radius: 4px; }\r\n+  </style>\r\n+</head>\r\n+\r\n+<body>\r\n+  <div class=\"container py-5\">\r\n+    <nav class=\"mb-4\">\r\n+      <a href=\"/\" class=\"back-link\">&larr; Back to Catalog</a>\r\n+    </nav>\r\n+\r\n+    <div class=\"row g-5\">\r\n+      <div class=\"col-12 col-md-6 col-lg-7\">\r\n+        <div class=\"product-img-container border\">\r\n           <img\r\n             src=\"/images/uploaded/<%= product.image %>\"\r\n             alt=\"<%= product.name %>\"\r\n-            class=\"w-100 rounded border\"\r\n-            style=\"aspect-ratio: 1/1; object-fit: cover\"\r\n+            class=\"main-img\"\r\n+            loading=\"lazy\"\r\n           />\r\n         </div>\r\n+      </div>\r\n \r\n-        <div class=\"col-12 col-md-6\">\r\n-          <h1 class=\"h3 fw-semibold\"><%= product.name %></h1>\r\n-          <p class=\"text-muted\"><%= product.description %></p>\r\n+      <div class=\"col-12 col-md-6 col-lg-5\">\r\n+        <div class=\"product-dept\"><%= product.department %></div>\r\n+        <h1 class=\"display-6 fw-bold mb-3\"><%= product.name %></h1>\r\n+        \r\n+        <div class=\"product-price\">$<%= product.price %></div>\r\n \r\n-          <div class=\"mb-3\">\r\n-            <div><strong>Price:</strong> <%= product.price %></div>\r\n-            <div><strong>Color:</strong> <%= product.color %></div>\r\n-            <div><strong>Department:</strong> <%= product.department %></div>\r\n-            <div><strong>Available:</strong> <%= (product.quantity ?? 0) %></div>\r\n+        <p class=\"text-secondary mb-4\" style=\"line-height: 1.6;\">\r\n+          <%= product.description %>\r\n+        </p>\r\n+\r\n+        <hr class=\"my-4 text-muted opacity-25\">\r\n+\r\n+        <div class=\"mb-4\">\r\n+          <div class=\"mb-2\">\r\n+            <span class=\"detail-label\">Color</span>\r\n+            <span class=\"detail-value text-capitalize\"><%= product.color %></span>\r\n           </div>\r\n+          <div class=\"mb-2\">\r\n+            <span class=\"detail-label\">Availability</span>\r\n+            <span class=\"detail-value\">\r\n+              <%= (product.quantity > 0) ? product.quantity + ' in stock' : 'Unavailable' %>\r\n+            </span>\r\n+          </div>\r\n+        </div>\r\n \r\n-          <% const available = (typeof product.quantity !== 'undefined' && product.quantity !== null) ? Number(product.quantity) : 0; %>\r\n+        <% const available = (typeof product.quantity !== 'undefined' && product.quantity !== null) ? Number(product.quantity) : 0; %>\r\n \r\n-          <% if (available <= 0) { %>\r\n-            <button class=\"btn btn-secondary\" disabled>Out of Stock</button>\r\n-          <% } else { %>\r\n-            <form class=\"d-flex gap-2 align-items-center\" method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n-              <div style=\"max-width: 140px;\">\r\n-                <label class=\"form-label mb-1\">Qty</label>\r\n+        <% if (available <= 0) { %>\r\n+          <button class=\"btn btn-secondary w-100 btn-out-of-stock\" disabled>Sold Out</button>\r\n+        <% } else { %>\r\n+          <form method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n+            <div class=\"row g-2 align-items-end\">\r\n+              <div class=\"col-3\">\r\n+                <label class=\"form-label small fw-bold\">Quantity</label>\r\n                 <input\r\n                   type=\"number\"\r\n                   name=\"qty\"\r\n-                  class=\"form-control\"\r\n+                  class=\"form-control qty-input\"\r\n                   min=\"1\"\r\n                   max=\"<%= available %>\"\r\n                   value=\"1\"\r\n                   required\r\n                 />\r\n               </div>\r\n-\r\n-              <div class=\"pt-4\">\r\n-                <button type=\"submit\" class=\"btn btn-info\">\r\n+              <div class=\"col-9\">\r\n+                <button type=\"submit\" class=\"btn btn-add-to-cart w-100\">\r\n                   Add To Cart\r\n                 </button>\r\n               </div>\r\n-            </form>\r\n-            <small class=\"text-muted d-block mt-2\">Max: <%= available %></small>\r\n-          <% } %>\r\n-        </div>\r\n+            </div>\r\n+            <p class=\"text-muted small mt-3\">\r\n+              <i class=\"bi bi-truck\"></i> Free shipping on orders over $100.\r\n+            </p>\r\n+          </form>\r\n+        <% } %>\r\n       </div>\r\n     </div>\r\n-  </body>\r\n-</html>\r\n+  </div>\r\n+\r\n+  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n+</body>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766094328183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,55 +5,44 @@\n   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n   <title><%= pagetitle %></title>\r\n \r\n   <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n-  \r\n+\r\n   <style>\r\n     body { background-color: #fff; color: #1a1a1a; font-family: system-ui, -apple-system, sans-serif; }\r\n     .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n     .back-link:hover { color: #000; }\r\n-    \r\n-    /* Image Gallery Styling */\r\n-    .product-img-container {\r\n-      background-color: #f8f9fa;\r\n-      border-radius: 12px;\r\n-      overflow: hidden;\r\n-    }\r\n-    .main-img {\r\n-      width: 100%;\r\n-      aspect-ratio: 1/1;\r\n-      object-fit: cover;\r\n-      mix-blend-mode: multiply; /* Works well if images have white backgrounds */\r\n-    }\r\n \r\n-    /* Typography & Details */\r\n+    .product-img-container { background-color: #f8f9fa; border-radius: 12px; overflow: hidden; }\r\n+    .main-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; mix-blend-mode: multiply; }\r\n+\r\n     .product-dept { text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; color: #6c757d; margin-bottom: 0.5rem; }\r\n     .product-price { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0; }\r\n     .detail-label { font-weight: 600; width: 100px; display: inline-block; font-size: 0.9rem; }\r\n     .detail-value { color: #495057; font-size: 0.9rem; }\r\n \r\n-    /* Form Styling */\r\n-    .qty-input {\r\n-      border: 1px solid #dee2e6;\r\n-      border-radius: 4px;\r\n-      text-align: center;\r\n-      font-weight: 600;\r\n-    }\r\n+    .qty-input { border: 1px solid #dee2e6; border-radius: 4px; text-align: center; font-weight: 600; }\r\n     .btn-add-to-cart {\r\n-      background-color: #1a1a1a;\r\n-      color: #fff;\r\n-      border: none;\r\n-      padding: 0.8rem 2rem;\r\n-      font-weight: 600;\r\n-      border-radius: 4px;\r\n+      background-color: #1a1a1a; color: #fff; border: none;\r\n+      padding: 0.8rem 2rem; font-weight: 600; border-radius: 4px;\r\n       transition: background-color 0.2s;\r\n     }\r\n     .btn-add-to-cart:hover { background-color: #333; color: #fff; }\r\n     .btn-out-of-stock { padding: 0.8rem 2rem; border-radius: 4px; }\r\n   </style>\r\n </head>\r\n \r\n <body>\r\n+  <%\r\n+    const available = (product && product.quantity != null) ? Number(product.quantity) : 0;\r\n+\r\n+    const dept = (product && product.department) ? product.department : 'General';\r\n+    const color = (product && product.color) ? product.color : 'N/A';\r\n+    const desc = (product && product.description) ? product.description : 'No description available.';\r\n+\r\n+    const imgSrc = (product && product.image) ? (\"/images/uploaded/\" + product.image) : \"/images/placeholder.png\";\r\n+  %>\r\n+\r\n   <div class=\"container py-5\">\r\n     <nav class=\"mb-4\">\r\n       <a href=\"/\" class=\"back-link\">&larr; Back to Catalog</a>\r\n     </nav>\r\n@@ -61,43 +50,41 @@\n     <div class=\"row g-5\">\r\n       <div class=\"col-12 col-md-6 col-lg-7\">\r\n         <div class=\"product-img-container border\">\r\n           <img\r\n-            src=\"/images/uploaded/<%= product.image %>\"\r\n-            alt=\"<%= product.name %>\"\r\n+            src=\"<%= imgSrc %>\"\r\n+            alt=\"<%= product ? product.name : 'Product' %>\"\r\n             class=\"main-img\"\r\n             loading=\"lazy\"\r\n           />\r\n         </div>\r\n       </div>\r\n \r\n       <div class=\"col-12 col-md-6 col-lg-5\">\r\n-        <div class=\"product-dept\"><%= product.department %></div>\r\n-        <h1 class=\"display-6 fw-bold mb-3\"><%= product.name %></h1>\r\n-        \r\n-        <div class=\"product-price\">$<%= product.price %></div>\r\n+        <div class=\"product-dept\"><%= dept %></div>\r\n+        <h1 class=\"display-6 fw-bold mb-3\"><%= product ? product.name : 'Unknown Product' %></h1>\r\n \r\n+        <div class=\"product-price\">$<%= product ? product.price : '0' %></div>\r\n+\r\n         <p class=\"text-secondary mb-4\" style=\"line-height: 1.6;\">\r\n-          <%= product.description %>\r\n+          <%= desc %>\r\n         </p>\r\n \r\n         <hr class=\"my-4 text-muted opacity-25\">\r\n \r\n         <div class=\"mb-4\">\r\n           <div class=\"mb-2\">\r\n             <span class=\"detail-label\">Color</span>\r\n-            <span class=\"detail-value text-capitalize\"><%= product.color %></span>\r\n+            <span class=\"detail-value text-capitalize\"><%= color %></span>\r\n           </div>\r\n           <div class=\"mb-2\">\r\n             <span class=\"detail-label\">Availability</span>\r\n             <span class=\"detail-value\">\r\n-              <%= (product.quantity > 0) ? product.quantity + ' in stock' : 'Unavailable' %>\r\n+              <%= (available > 0) ? (available + ' in stock') : 'Unavailable' %>\r\n             </span>\r\n           </div>\r\n         </div>\r\n \r\n-        <% const available = (typeof product.quantity !== 'undefined' && product.quantity !== null) ? Number(product.quantity) : 0; %>\r\n-\r\n         <% if (available <= 0) { %>\r\n           <button class=\"btn btn-secondary w-100 btn-out-of-stock\" disabled>Sold Out</button>\r\n         <% } else { %>\r\n           <form method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n@@ -120,9 +107,9 @@\n                 </button>\r\n               </div>\r\n             </div>\r\n             <p class=\"text-muted small mt-3\">\r\n-              <i class=\"bi bi-truck\"></i> Free shipping on orders over $100.\r\n+              Free shipping on orders over $100.\r\n             </p>\r\n           </form>\r\n         <% } %>\r\n       </div>\r\n@@ -130,5 +117,5 @@\n   </div>\r\n \r\n   <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n </body>\r\n-</html>\n\\ No newline at end of file\n+</html>\r\n"
                },
                {
                    "date": 1766095850753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n   <meta charset=\"UTF-8\" />\r\n   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n   <title><%= pagetitle %></title>\r\n \r\n-  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" />\r\n+  \r\n \r\n   <style>\r\n     body { background-color: #fff; color: #1a1a1a; font-family: system-ui, -apple-system, sans-serif; }\r\n     .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n"
                },
                {
                    "date": 1766096354859,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,121 +1,105 @@\n-<!doctype html>\r\n-<html lang=\"en\">\r\n-<head>\r\n-  <meta charset=\"UTF-8\" />\r\n-  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n-  <title><%= pagetitle %></title>\r\n+<style>\r\n+  .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n+  .back-link:hover { color: #2d2828; }\r\n \r\n-  \r\n+  .product-img-container { background-color: #f8f9fa; border-radius: 12px; overflow: hidden; }\r\n+  .main-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; mix-blend-mode: multiply; }\r\n \r\n-  <style>\r\n-    body { background-color: #fff; color: #1a1a1a; font-family: system-ui, -apple-system, sans-serif; }\r\n-    .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n-    .back-link:hover { color: #000; }\r\n+  .product-dept { text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; color: #6c757d; margin-bottom: 0.5rem; }\r\n+  .product-price { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0; }\r\n+  .detail-label { font-weight: 600; width: 100px; display: inline-block; font-size: 0.9rem; }\r\n+  .detail-value { color: #495057; font-size: 0.9rem; }\r\n \r\n-    .product-img-container { background-color: #f8f9fa; border-radius: 12px; overflow: hidden; }\r\n-    .main-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; mix-blend-mode: multiply; }\r\n+  .qty-input { border: 1px solid #dee2e6; border-radius: 4px; text-align: center; font-weight: 600; }\r\n+  .btn-add-to-cart {\r\n+    background-color: #1a1a1a; color: #fff; border: none;\r\n+    padding: 0.8rem 2rem; font-weight: 600; border-radius: 4px;\r\n+    transition: background-color 0.2s;\r\n+  }\r\n+  .btn-add-to-cart:hover { background-color: #333; color: #fff; }\r\n+  .btn-out-of-stock { padding: 0.8rem 2rem; border-radius: 4px; }\r\n+</style>\r\n \r\n-    .product-dept { text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; color: #6c757d; margin-bottom: 0.5rem; }\r\n-    .product-price { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0; }\r\n-    .detail-label { font-weight: 600; width: 100px; display: inline-block; font-size: 0.9rem; }\r\n-    .detail-value { color: #495057; font-size: 0.9rem; }\r\n+<%\r\n+  const available = (product && product.quantity != null) ? Number(product.quantity) : 0;\r\n \r\n-    .qty-input { border: 1px solid #dee2e6; border-radius: 4px; text-align: center; font-weight: 600; }\r\n-    .btn-add-to-cart {\r\n-      background-color: #1a1a1a; color: #fff; border: none;\r\n-      padding: 0.8rem 2rem; font-weight: 600; border-radius: 4px;\r\n-      transition: background-color 0.2s;\r\n-    }\r\n-    .btn-add-to-cart:hover { background-color: #333; color: #fff; }\r\n-    .btn-out-of-stock { padding: 0.8rem 2rem; border-radius: 4px; }\r\n-  </style>\r\n-</head>\r\n+  const dept = (product && product.department) ? product.department : 'General';\r\n+  const color = (product && product.color) ? product.color : 'N/A';\r\n+  const desc = (product && product.description) ? product.description : 'No description available.';\r\n \r\n-<body>\r\n-  <%\r\n-    const available = (product && product.quantity != null) ? Number(product.quantity) : 0;\r\n+  const imgSrc = (product && product.image) ? (\"/images/uploaded/\" + product.image) : \"/images/placeholder.png\";\r\n+%>\r\n \r\n-    const dept = (product && product.department) ? product.department : 'General';\r\n-    const color = (product && product.color) ? product.color : 'N/A';\r\n-    const desc = (product && product.description) ? product.description : 'No description available.';\r\n+<div class=\"container py-5\">\r\n+  <nav class=\"mb-4\">\r\n+    <a href=\"/\" class=\"back-link\">&larr; Back to Catalog</a>\r\n+  </nav>\r\n \r\n-    const imgSrc = (product && product.image) ? (\"/images/uploaded/\" + product.image) : \"/images/placeholder.png\";\r\n-  %>\r\n-\r\n-  <div class=\"container py-5\">\r\n-    <nav class=\"mb-4\">\r\n-      <a href=\"/\" class=\"back-link\">&larr; Back to Catalog</a>\r\n-    </nav>\r\n-\r\n-    <div class=\"row g-5\">\r\n-      <div class=\"col-12 col-md-6 col-lg-7\">\r\n-        <div class=\"product-img-container border\">\r\n-          <img\r\n-            src=\"<%= imgSrc %>\"\r\n-            alt=\"<%= product ? product.name : 'Product' %>\"\r\n-            class=\"main-img\"\r\n-            loading=\"lazy\"\r\n-          />\r\n-        </div>\r\n+  <div class=\"row g-5\">\r\n+    <div class=\"col-12 col-md-6 col-lg-7\">\r\n+      <div class=\"product-img-container border\">\r\n+        <img\r\n+          src=\"<%= imgSrc %>\"\r\n+          alt=\"<%= product ? product.name : 'Product' %>\"\r\n+          class=\"main-img\"\r\n+          loading=\"lazy\"\r\n+        />\r\n       </div>\r\n+    </div>\r\n \r\n-      <div class=\"col-12 col-md-6 col-lg-5\">\r\n-        <div class=\"product-dept\"><%= dept %></div>\r\n-        <h1 class=\"display-6 fw-bold mb-3\"><%= product ? product.name : 'Unknown Product' %></h1>\r\n+    <div class=\"col-12 col-md-6 col-lg-5\">\r\n+      <div class=\"product-dept\"><%= dept %></div>\r\n+      <h1 class=\"display-6 fw-bold mb-3\"><%= product ? product.name : 'Unknown Product' %></h1>\r\n \r\n-        <div class=\"product-price\">$<%= product ? product.price : '0' %></div>\r\n+      <div class=\"product-price\">$<%= product ? product.price : '0' %></div>\r\n \r\n-        <p class=\"text-secondary mb-4\" style=\"line-height: 1.6;\">\r\n-          <%= desc %>\r\n-        </p>\r\n+      <p class=\"text-secondary mb-4\" style=\"line-height: 1.6;\">\r\n+        <%= desc %>\r\n+      </p>\r\n \r\n-        <hr class=\"my-4 text-muted opacity-25\">\r\n+      <hr class=\"my-4 text-muted opacity-25\">\r\n \r\n-        <div class=\"mb-4\">\r\n-          <div class=\"mb-2\">\r\n-            <span class=\"detail-label\">Color</span>\r\n-            <span class=\"detail-value text-capitalize\"><%= color %></span>\r\n-          </div>\r\n-          <div class=\"mb-2\">\r\n-            <span class=\"detail-label\">Availability</span>\r\n-            <span class=\"detail-value\">\r\n-              <%= (available > 0) ? (available + ' in stock') : 'Unavailable' %>\r\n-            </span>\r\n-          </div>\r\n+      <div class=\"mb-4\">\r\n+        <div class=\"mb-2\">\r\n+          <span class=\"detail-label\">Color</span>\r\n+          <span class=\"detail-value text-capitalize\"><%= color %></span>\r\n         </div>\r\n+        <div class=\"mb-2\">\r\n+          <span class=\"detail-label\">Availability</span>\r\n+          <span class=\"detail-value\">\r\n+            <%= (available > 0) ? (available + ' in stock') : 'Unavailable' %>\r\n+          </span>\r\n+        </div>\r\n+      </div>\r\n \r\n-        <% if (available <= 0) { %>\r\n-          <button class=\"btn btn-secondary w-100 btn-out-of-stock\" disabled>Sold Out</button>\r\n-        <% } else { %>\r\n-          <form method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n-            <div class=\"row g-2 align-items-end\">\r\n-              <div class=\"col-3\">\r\n-                <label class=\"form-label small fw-bold\">Quantity</label>\r\n-                <input\r\n-                  type=\"number\"\r\n-                  name=\"qty\"\r\n-                  class=\"form-control qty-input\"\r\n-                  min=\"1\"\r\n-                  max=\"<%= available %>\"\r\n-                  value=\"1\"\r\n-                  required\r\n-                />\r\n-              </div>\r\n-              <div class=\"col-9\">\r\n-                <button type=\"submit\" class=\"btn btn-add-to-cart w-100\">\r\n-                  Add To Cart\r\n-                </button>\r\n-              </div>\r\n+      <% if (available <= 0) { %>\r\n+        <button class=\"btn btn-secondary w-100 btn-out-of-stock\" disabled>Sold Out</button>\r\n+      <% } else { %>\r\n+        <form method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n+          <div class=\"row g-2 align-items-end\">\r\n+            <div class=\"col-3\">\r\n+              <label class=\"form-label small fw-bold\">Quantity</label>\r\n+              <input\r\n+                type=\"number\"\r\n+                name=\"qty\"\r\n+                class=\"form-control qty-input\"\r\n+                min=\"1\"\r\n+                max=\"<%= available %>\"\r\n+                value=\"1\"\r\n+                required\r\n+              />\r\n             </div>\r\n-            <p class=\"text-muted small mt-3\">\r\n-              Free shipping on orders over $100.\r\n-            </p>\r\n-          </form>\r\n-        <% } %>\r\n-      </div>\r\n+            <div class=\"col-9\">\r\n+              <button type=\"submit\" class=\"btn btn-add-to-cart w-100\">\r\n+                Add To Cart\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+          <p class=\"text-muted small mt-3\">\r\n+            Free shipping on orders over $100.\r\n+          </p>\r\n+        </form>\r\n+      <% } %>\r\n     </div>\r\n   </div>\r\n-\r\n-  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n-</body>\r\n-</html>\r\n+</div>\r\n"
                },
                {
                    "date": 1766096355179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,105 @@\n+<style>\r\n+  .back-link { color: #6c757d; text-decoration: none; font-size: 0.9rem; transition: color 0.2s; }\r\n+  .back-link:hover { color: #2d2828; }\r\n+\r\n+  .product-img-container { background-color: #f8f9fa; border-radius: 12px; overflow: hidden; }\r\n+  .main-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; mix-blend-mode: multiply; }\r\n+\r\n+  .product-dept { text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; color: #6c757d; margin-bottom: 0.5rem; }\r\n+  .product-price { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0; }\r\n+  .detail-label { font-weight: 600; width: 100px; display: inline-block; font-size: 0.9rem; }\r\n+  .detail-value { color: #495057; font-size: 0.9rem; }\r\n+\r\n+  .qty-input { border: 1px solid #dee2e6; border-radius: 4px; text-align: center; font-weight: 600; }\r\n+  .btn-add-to-cart {\r\n+    background-color: #1a1a1a; color: #fff; border: none;\r\n+    padding: 0.8rem 2rem; font-weight: 600; border-radius: 4px;\r\n+    transition: background-color 0.2s;\r\n+  }\r\n+  .btn-add-to-cart:hover { background-color: #333; color: #fff; }\r\n+  .btn-out-of-stock { padding: 0.8rem 2rem; border-radius: 4px; }\r\n+</style>\r\n+\r\n+<%\r\n+  const available = (product && product.quantity != null) ? Number(product.quantity) : 0;\r\n+\r\n+  const dept = (product && product.department) ? product.department : 'General';\r\n+  const color = (product && product.color) ? product.color : 'N/A';\r\n+  const desc = (product && product.description) ? product.description : 'No description available.';\r\n+\r\n+  const imgSrc = (product && product.image) ? (\"/images/uploaded/\" + product.image) : \"/images/placeholder.png\";\r\n+%>\r\n+\r\n+<div class=\"container py-5\">\r\n+  <nav class=\"mb-4\">\r\n+    <a href=\"/\" class=\"back-link\">&larr; Back to Catalog</a>\r\n+  </nav>\r\n+\r\n+  <div class=\"row g-5\">\r\n+    <div class=\"col-12 col-md-6 col-lg-7\">\r\n+      <div class=\"product-img-container border\">\r\n+        <img\r\n+          src=\"<%= imgSrc %>\"\r\n+          alt=\"<%= product ? product.name : 'Product' %>\"\r\n+          class=\"main-img\"\r\n+          loading=\"lazy\"\r\n+        />\r\n+      </div>\r\n+    </div>\r\n+\r\n+    <div class=\"col-12 col-md-6 col-lg-5\">\r\n+      <div class=\"product-dept\"><%= dept %></div>\r\n+      <h1 class=\"display-6 fw-bold mb-3\"><%= product ? product.name : 'Unknown Product' %></h1>\r\n+\r\n+      <div class=\"product-price\">$<%= product ? product.price : '0' %></div>\r\n+\r\n+      <p class=\"text-secondary mb-4\" style=\"line-height: 1.6;\">\r\n+        <%= desc %>\r\n+      </p>\r\n+\r\n+      <hr class=\"my-4 text-muted opacity-25\">\r\n+\r\n+      <div class=\"mb-4\">\r\n+        <div class=\"mb-2\">\r\n+          <span class=\"detail-label\">Color</span>\r\n+          <span class=\"detail-value text-capitalize\"><%= color %></span>\r\n+        </div>\r\n+        <div class=\"mb-2\">\r\n+          <span class=\"detail-label\">Availability</span>\r\n+          <span class=\"detail-value\">\r\n+            <%= (available > 0) ? (available + ' in stock') : 'Unavailable' %>\r\n+          </span>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <% if (available <= 0) { %>\r\n+        <button class=\"btn btn-secondary w-100 btn-out-of-stock\" disabled>Sold Out</button>\r\n+      <% } else { %>\r\n+        <form method=\"POST\" action=\"/add-cart/<%= product._id %>\">\r\n+          <div class=\"row g-2 align-items-end\">\r\n+            <div class=\"col-3\">\r\n+              <label class=\"form-label small fw-bold\">Quantity</label>\r\n+              <input\r\n+                type=\"number\"\r\n+                name=\"qty\"\r\n+                class=\"form-control qty-input\"\r\n+                min=\"1\"\r\n+                max=\"<%= available %>\"\r\n+                value=\"1\"\r\n+                required\r\n+              />\r\n+            </div>\r\n+            <div class=\"col-9\">\r\n+              <button type=\"submit\" class=\"btn btn-add-to-cart w-100\">\r\n+                Add To Cart\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+          <p class=\"text-muted small mt-3\">\r\n+            Free shipping on orders over $100.\r\n+          </p>\r\n+        </form>\r\n+      <% } %>\r\n+    </div>\r\n+  </div>\r\n+</div>\r\n"
                }
            ],
            "date": 1766080019475,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\" />\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n  <title><%= pagetitle %></title>\r\n\r\n  <link\r\n    href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\r\n    rel=\"stylesheet\"\r\n  />\r\n</head>\r\n<body>\r\n  <div class=\"container py-4\">\r\n    <a href=\"/\" class=\"btn btn-link px-0\">&larr; Back</a>\r\n\r\n    <div class=\"row g-4 align-items-start\">\r\n      <div class=\"col-12 col-md-6\">\r\n        <img\r\n          src=\"/images/uploaded/<%= product.image %>\"\r\n          alt=\"<%= product.name %>\"\r\n          class=\"w-100 rounded border\"\r\n          style=\"aspect-ratio: 1/1; object-fit: cover;\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"col-12 col-md-6\">\r\n        <h1 class=\"h3 fw-semibold\"><%= product.name %></h1>\r\n        <p class=\"text-muted\"><%= product.description %></p>\r\n\r\n        <div class=\"mb-3\">\r\n          <div><strong>Price:</strong> <%= product.price %></div>\r\n          <div><strong>Color:</strong> <%= product.color %></div>\r\n          <div><strong>Department:</strong> <%= product.department %></div>\r\n        </div>\r\n\r\n        <a href=\"/add-cart/<%= product._id %>\" class=\"btn btn-info\">\r\n          Add To Cart\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</body>\r\n</html>\r\n"
        }
    ]
}